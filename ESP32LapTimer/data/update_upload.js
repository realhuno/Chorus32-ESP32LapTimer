var e=document.getElementById("update_button"),t=document.getElementById("update_file");function n(e){var t=e.loaded/e.total,n=document.getElementById("update_bar"),d=parseInt(100*t);n.style.width=d+"%",n.innerHTML=d+"%"}function d(e){console.log("Upload complete!")}function a(e){console.log("Upload failed!")}e.addEventListener("click",(function(){var e=document.getElementById("update_file").files[0],t=new FormData;t.append("update",e);var o=new XMLHttpRequest;o.upload.addEventListener("progress",n,!1),o.addEventListener("load",d,!1),o.addEventListener("error",a,!1),o.addEventListener("abort",a,!1),o.onreadystatechange=function(){4===o.readyState&&document.write(o.responseText)},o.open("POST","/update",!0),o.send(t)})),e.disabled=!0,t.addEventListener("input",(function(){e.disabled=!1}));